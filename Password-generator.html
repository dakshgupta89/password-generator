<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mini Password Generator</title>
  <style>
    :root{--bg:#0f1724;--card:#2252b1;--accent:#7c3aed;--muted:#9aa4b2;--good:#16a34a;--bad:#ef4444}
    *{box-sizing:border-box;font-family:Inter,Segoe UI,Roboto,Arial,sans-serif}

    body{margin:0;min-height:100vh;background:linear-gradient(180deg,#071029 0%, #0b1424 100%);color:#e6eef8;display:flex;align-items:center;justify-content:center;padding:24px}
    
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));width:100%;max-width:760px;padding:26px;border-radius:14px;box-shadow:0 8px 30px rgba(2,6,23,0.6);border:1px solid rgba(255,255,255,0.03)}
    h1{margin:0 0 8px;font-size:20px}
    p.lead{margin:0 0 18px;color:var(--muted)}
    .row{display:flex;gap:16px}
    .col{flex:1}
    .controls{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:14px}
    label.switch{display:flex;align-items:center;gap:10px;background:rgba(255,255,255,0.02);padding:10px;border-radius:8px}
    input[type=checkbox]{width:18px;height:18px}
    .out{display:flex;gap:8px;align-items:center}
    .output{flex:1;background:rgba(255,255,255,0.02);padding:12px;border-radius:10px;font-family:monospace;overflow-wrap:anywhere}
    button{background:var(--accent);border:none;padding:10px 14px;border-radius:10px;color:white;cursor:pointer;font-weight:600}
    button.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06)}
    .range{display:flex;align-items:center;gap:10px}
    input[type=range]{-webkit-animation:none;animation:none;width:100%;height:6px;border-radius:6px;background:linear-gradient(90deg,var(--accent),#3b82f6)}
    .meta{display:flex;gap:10px;align-items:center;margin-top:12px}
    .strength{height:9px;border-radius:6px;background:rgba(255,255,255,0.04);width:100%;overflow:hidden}
    .strength > i{display:block;height:100%;width:0%;background:linear-gradient(90deg,#ef4444,#f59e0b,#10b981);transition:width .25s}
    footer{margin-top:12px;color:var(--muted);font-size:13px}
    .copy{display:inline-flex;align-items:center;gap:8px}
    @media (max-width:640px){.controls{grid-template-columns:1fr}
    .row{flex-direction:column}}
  </style>
</head>
<body>
  <div class="card">
    <h1>Mini Password Generator</h1>
    <p class="lead">Generate strong passwords quickly. Choose length, character sets and click <strong>Generate</strong>.</p>

    <div class="controls" aria-label="options">
      <label class="switch"><input id="chkLower" type="checkbox" checked><span>Lowercase (a-z)</span></label>
      <label class="switch"><input id="chkUpper" type="checkbox" checked><span>Uppercase (A-Z)</span></label>
      <label class="switch"><input id="chkNumbers" type="checkbox" checked><span>Numbers (0-9)</span></label>
      <label class="switch"><input id="chkSymbols" type="checkbox"><span>Symbols (!@#$...)</span></label>
    </div>

    <div class="row">
      <div class="col">
        <div class="range">
          <label style="min-width:80px">Length</label>
          <input id="lengthRange" type="range" min="6" max="32" value="12">
          <output id="lengthVal">12</output>
        </div>
        <div class="meta">
          <div style="flex:1">
            <div class="strength" aria-hidden><i id="strengthBar"></i></div>
            <div style="margin-top:6px;color:var(--muted);font-size:13px" id="strengthText">Strength: —</div>
          </div>
        </div>
      </div>

      <div style="width:320px;min-width:220px">
        <div class="out">
          <div class="output" id="output" role="textbox" aria-readonly="true">Click Generate to create a password</div>
          <div style="display:flex;flex-direction:column;gap:8px;margin-left:8px">
            <button id="btnGenerate">Generate</button>
            <button id="btnCopy" class="secondary">Copy</button>
          </div>
        </div>
        <div style="display:flex;gap:8px;margin-top:10px">
          <button id="btnSave" class="secondary">Download .txt</button>
          <button id="btnShuffle" class="secondary">Shuffle</button>
        </div>
      </div>
    </div>

    <footer>Tip: use a password manager and unique passwords per site.</footer>
  </div>

  <script>
    // Character sets
    const LOWER = 'abcdefghijklmnopqrstuvwxyz';
    const UPPER = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
    const NUM = '0123456789';
    const SYM = '!@#$%^&*()_+-=[]{}|;:,.<>/?`~';

    // Elements
    const chkLower = document.getElementById('chkLower');
    const chkUpper = document.getElementById('chkUpper');
    const chkNumbers = document.getElementById('chkNumbers');
    const chkSymbols = document.getElementById('chkSymbols');
    const lengthRange = document.getElementById('lengthRange');
    const lengthVal = document.getElementById('lengthVal');
    const output = document.getElementById('output');
    const btnGenerate = document.getElementById('btnGenerate');
    const btnCopy = document.getElementById('btnCopy');
    const btnSave = document.getElementById('btnSave');
    const btnShuffle = document.getElementById('btnShuffle');
    const strengthBar = document.getElementById('strengthBar');
    const strengthText = document.getElementById('strengthText');

    // Update length label
    lengthRange.addEventListener('input', ()=>{ lengthVal.value = lengthRange.value; evaluateStrength(); });

    // Generate password
    function generatePassword(){
      let charset = '';
      if(chkLower.checked) charset += LOWER;
      if(chkUpper.checked) charset += UPPER;
      if(chkNumbers.checked) charset += NUM;
      if(chkSymbols.checked) charset += SYM;
      const len = Number(lengthRange.value);
      if(!charset) return 'Please select at least one character set.';
      // ensure at least one of each selected type is included for better security
      const selectedSets = [];
      if(chkLower.checked) selectedSets.push(LOWER);
      if(chkUpper.checked) selectedSets.push(UPPER);
      if(chkNumbers.checked) selectedSets.push(NUM);
      if(chkSymbols.checked) selectedSets.push(SYM);

      const passwordChars = [];
      // add one guaranteed char from each set
      for(const s of selectedSets){ passwordChars.push(randomChar(s)); }

      for(let i=passwordChars.length;i<len;i++){
        passwordChars.push(randomChar(charset));
      }
      // shuffle to avoid predictable positions
      shuffleArray(passwordChars);
      return passwordChars.join('');
    }

    function randomChar(str){ return str[Math.floor(Math.random()*str.length)]; }

    function shuffleArray(arr){
      for(let i=arr.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
    }

    function evaluateStrength(){
      const len = Number(lengthRange.value);
      let score = 0;
      if(len >= 8) score += 1;
      if(len >= 12) score += 1;
      if(chkLower.checked) score += 1;
      if(chkUpper.checked) score += 1;
      if(chkNumbers.checked) score += 1;
      if(chkSymbols.checked) score += 1;
      // normalized to 0-100
      const pct = Math.min(100, Math.round((score/6)*100));
      strengthBar.style.width = pct + '%';
      let text = 'Very weak';
      if(pct >= 80) { text = 'Very strong'; }
      else if(pct >= 60) { text = 'Strong'; }
      else if(pct >= 40) { text = 'Moderate'; }
      else if(pct >= 20) { text = 'Weak'; }
      strengthText.textContent = `Strength: ${text} (${pct}%)`;
      return pct;
    }

    // Handlers
    btnGenerate.addEventListener('click', ()=>{
      const pwd = generatePassword();
      output.textContent = pwd;
      evaluateStrength();
    });

    btnCopy.addEventListener('click', async ()=>{
      try{
        await navigator.clipboard.writeText(output.textContent);
        btnCopy.textContent = 'Copied ✓';
        setTimeout(()=> btnCopy.textContent = 'Copy', 1500);
      }catch(e){
        alert('Copy failed — please copy manually.');
      }
    });

    btnSave.addEventListener('click', ()=>{
      const text = output.textContent || '';
      const blob = new Blob([text], {type: 'text/plain'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'password.txt';
      document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    });

    btnShuffle.addEventListener('click', ()=>{
      const cur = output.textContent;
      if(!cur || cur.startsWith('Please')) return;
      const arr = cur.split(''); shuffleArray(arr); output.textContent = arr.join('');
    });

    // update strength when options change
    [chkLower, chkUpper, chkNumbers, chkSymbols].forEach(el=> el.addEventListener('change', evaluateStrength));

    // init
    evaluateStrength();
  </script>
</body>
</html>
